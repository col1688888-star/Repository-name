<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ©Ÿå°ç•Œé¢ Â· æŠ½å±œç¨ç«‹å…¨å³å´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dseg@0.46.0/css/dseg7.min.css">
    <style>
        /* ----- å…¨åŸŸé‡ç½® ----- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #0b0e14;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px;
            touch-action: manipulation;
            position: relative;
            overflow-x: hidden;
        }

        #playMainArea {
            width: 100%;
            max-width: 400px;
            height: 92vh;
            max-height: 780px;
            background: #10131c;
            border: 2px solid #2a4a5a;
            border-radius: 28px;
            box-shadow: 0 8px 0 #0a121c;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 5;
        }

        /* å„å€åŸŸæ¯”ä¾‹ */
        #dataArea { flex: 0 0 28%; min-height: 170px; padding: 8px 8px 4px 8px; position: relative; z-index: 10; }
        #content { flex: 0 0 40%; min-height: 220px; padding: 6px 8px; }
        #panelTop { flex: 0 0 9%; min-height: 58px; }
        #panelBottom { flex: 0 0 13%; min-height: 68px; }
        #commandArea { flex: 0 0 8%; min-height: 48px; }

        /* ----- å–®ä¸€è¦–è¨Šè½‰è»¸å€ (ç›´ç«‹é¡¯ç¤º) ----- */
        .reel-container {
            width: 100%;
            height: 100%;
            background: #0d121b;
            border-radius: 28px;
            border: 1px solid #2f4457;
            padding: 6px;
            box-shadow: inset 0 3px 6px #00000080, 0 4px 0 #0f1a22;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .single-reel {
            width: 100%;
            height: 100%;
            background: #1b2633;
            border-radius: 20px;
            border: 1px solid #3d5c70;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #remotePlayer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: transparent;
            z-index: 1;
        }

        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            font-weight: bold;
            text-shadow: 0 2px 4px #000;
            background: rgba(0,0,0,0.3);
            pointer-events: none;
            z-index: 2;
            opacity: 0.5;
        }

        .pip-active #playMainArea {
            border: 3px solid #f5e37a;
            box-shadow: 0 0 0 3px #c9a244, 0 8px 0 #0a121c;
        }

        #panelTop dl { text-align: center; }
        #panelTop dt {
            font-size: 9px;
            color: #a0c8dd !important;
            font-weight: bold;
        }
        #panelTop dd {
            font-size: 13px;
            font-family: 'DSEG7 Classic', monospace;
            color: #f3de8a !important;
        }

        #medalNum, #bbPoint { color: #f3de8a !important; }

        /* å¤§è³ç‡ˆå®¹å™¨ */
        .prize-light-container-special {
            width: 100%;
            height: 100%;
            background: #141a24;
            border: 1px solid #2c4050;
            border-radius: 20px;
            box-shadow: inset 0 2px 4px #00000060;
            overflow: hidden;
            position: relative;
        }

        .prizeLightPages {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 0.3s ease-out;
        }

        .prizeLightPage {
            width: 33.333%;
            height: 100%;
            padding: 6px 6px 4px 6px;
            display: flex;
            flex-direction: column;
        }

        .pageHeader {
            flex: 0 0 16%;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            border-bottom: 1px solid #2e4a5a;
            margin-bottom: 4px;
            padding-bottom: 2px;
        }

        .dataTabs {
            display: flex;
            gap: 8px;
        }

        .dataTab {
            height: 24px;
            padding: 0 12px;
            background: #1f2a34;
            border: 1px solid #3e5f70;
            border-radius: 30px;
            color: #b0d4e0;
            font-size: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            letter-spacing: 0.3px;
            cursor: pointer;
            transition: all 0.1s;
        }

        .dataTab.active {
            background: #00b8c4;
            color: #111;
            border-color: #6ec0d0;
            font-weight: bold;
        }

        .pageContent {
            flex: 1;
            display: grid;
            grid-template-columns: 70% 28%;
            gap: 6px;
            overflow: hidden;
            margin-top: 2px;
        }

        .blockChartWrapper {
            background: #0e151f;
            border: 1px solid #2c4053;
            border-radius: 14px;
            padding: 6px 4px;
        }

        .blockChartBars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: calc(100% - 18px);
            gap: 2px;
        }

        .blockChartBar {
            width: 8%;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            gap: 2px;
        }

        .blockChartBlock {
            width: 100%;
            height: 10px;
            border-radius: 2px;
            border: 1px solid #2d4b5a;
        }

        .block-red { background: #cc3b5e; }
        .block-green { background: #2bb87c; }

        .blockChartValue {
            color: #9fc8d9;
            font-size: 7px;
            font-family: 'DSEG7 Classic', monospace;
        }

        .dataPanel {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .dataCard {
            background: #121b26;
            border: 1px solid #2e4a5e;
            border-radius: 12px;
            padding: 6px 5px;
            box-shadow: 0 2px 0 #0b121c;
        }

        .dataCardHeader {
            font-size: 8px;
            color: #90b8cc;
            font-weight: bold;
            margin-bottom: 2px;
        }

        .dataCardValue {
            font-size: 13px;
            font-family: 'DSEG7 Classic', monospace;
            text-align: right;
            color: #e0eef5;
        }
        .dataCard-total .dataCardValue { color: #f5e37a; }
        .dataCard-bb .dataCardValue { color: #ff8a9f; }
        .dataCard-rb .dataCardValue { color: #8ff0b5; }

        .control-panel {
            background: #141c28;
            border-top: 1px solid #2e4b60;
            border-bottom: 1px solid #2e4b60;
            box-shadow: inset 0 2px 3px #00000050;
        }

        .game-btn {
            transition: all 0.1s ease;
            border-radius: 40px;
            font-weight: 800;
            letter-spacing: 0.5px;
            border: 1px solid #4e7a94;
            color: white;
            background: #2c4053;
            box-shadow: 0 4px 0 #0a1a22, 0 2px 4px #000000b0;
        }
        .game-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #0a1a22, 0 2px 4px #000;
        }
        .btn-red { background: #be3e62; border-color: #d4668a; }
        .btn-amber { background: #c47c34; border-color: #efb36e; color: white; }
        .btn-green { background: #1f8f6b; border-color: #52c2a0; }
        .btn-purple { background: #8a5fb0; border-color: #b792e6; }
        .btn-gray { background: #3a4b5e; border-color: #6f859b; }

        .stop-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #1f6f8f;
            border: 2px solid #6fb4cf;
            box-shadow: 0 4px 0 #0f3545, 0 2px 6px #000;
            color: white;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .stop-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #0f3545, 0 2px 4px #000;
        }

        .joystick {
            width: 58px;
            height: 58px;
            background: radial-gradient(circle at 35% 35%, #f0f5fa, #7f8b9c 60%, #3f4d5c 90%);
            border: 2px solid #b0c8dd;
            border-radius: 50%;
            box-shadow: 0 7px 0 #1f3340, 0 10px 12px #000000b0;
            position: relative;
            cursor: pointer;
            transition: all 0.08s linear;
        }

        .status-message {
            position: fixed;
            top: 12px;
            left: 12px;
            right: 12px;
            background: #1d2a36;
            border: 2px solid #3487a7;
            border-radius: 60px;
            padding: 12px 20px;
            color: #dcf0f5;
            font-weight: bold;
            font-size: 14px;
            z-index: 3000;
            text-align: center;
            transform: translateY(-80px);
            transition: transform 0.3s ease;
        }
        .status-message.show { transform: translateY(0); }

        .prize-light-navigation {
            position: absolute;
            bottom: 4px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transform: translateY(8px);
            transition: 0.2s;
        }
        .prize-light-navigation.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        .prize-light-touch-zone {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: transparent;
            z-index: 90;
            pointer-events: all;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }
        .touch-indicator {
            width: 50px;
            height: 5px;
            background: #3b7890;
            border-radius: 20px;
            margin-bottom: 6px;
        }

        /* ========= å…¨æ–°ç¨ç«‹æŠ½å±œ (ä¸ä¾·é™åœ¨å¤§è³ç‡ˆå…§) ========= */
        /* è§¸ç™¼å€ - æ”¹ç‚ºå›ºå®šåœ¨ä¸»ç•«é¢å³å´é‚Šç·£ */
        .drawer-trigger-area {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 90px;
            background: rgba(27, 59, 75, 0.6);
            backdrop-filter: blur(4px);
            border: 2px solid #2e7a9a;
            border-right: none;
            border-radius: 30px 0 0 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            cursor: pointer;
            box-shadow: -2px 4px 0 #0e202b;
            transition: all 0.15s;
        }
        .drawer-trigger-area:active {
            transform: translateY(-50%) translateX(-2px);
            box-shadow: 0 2px 0 #0e202b;
        }
        .drawer-arrow {
            color: #d0f0ff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 2px #000;
        }

        /* æŠ½å±œæœ¬é«” - ç¨ç«‹æ–¼ä¸»æ©Ÿå°ä¹‹å¤–ï¼Œå›ºå®šåœ¨å³å´ */
        .slide-drawer {
            position: fixed;
            right: -300px;          /* å®Œå…¨éš±è—æ™‚ä¸å¯è¦‹ */
            top: 12px;
            bottom: 12px;
            width: 280px;
            background: #1b2633;
            border: 2px solid #2e6a88;
            border-radius: 24px 0 0 24px;
            box-shadow: -6px 8px 0 #0e202b, 0 10px 20px #000;
            z-index: 2500;
            transition: right 0.3s cubic-bezier(0.2, 0.9, 0.3, 1.1);
            pointer-events: all;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .slide-drawer.open { right: 0; }

        .drawer-header {
            background: #1f3e50;
            padding: 14px 12px;
            border-bottom: 2px solid #2e7a9a;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #d0f0ff;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .drawer-content {
            padding: 16px 12px;
            background: #14222e;
            overflow-y: auto;
            flex: 1;
            scrollbar-width: thin;
            scrollbar-color: #2e6a88 #14222e;
        }
        .drawer-content::-webkit-scrollbar {
            width: 4px;
        }
        .drawer-content::-webkit-scrollbar-track {
            background: #14222e;
        }
        .drawer-content::-webkit-scrollbar-thumb {
            background: #2e6a88;
            border-radius: 10px;
        }

        /* PiP æ»‘è»Œé–‹é—œ (ä¿ç•™) */
        .pip-section {
            background: #1a3342;
            border: 2px solid #2e7a9a;
            border-radius: 16px;
            padding: 15px 10px;
            margin-bottom: 18px;
        }

        .pip-title {
            color: #f5e37a;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .pip-slider-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }

        .pip-slider-label {
            color: #8fcae0;
            font-size: 11px;
            min-width: 45px;
        }

        .pip-slider-track {
            flex: 1;
            height: 24px;
            background: #0f2a36;
            border-radius: 30px;
            border: 1px solid #3d7895;
            position: relative;
            cursor: pointer;
            box-shadow: inset 0 2px 5px #000;
        }

        .pip-slider-thumb {
            width: 34px;
            height: 34px;
            background: #f5e37a;
            border-radius: 50%;
            position: absolute;
            top: -5px;
            left: -2px;
            box-shadow: 0 3px 0 #7a5f2a, 0 2px 8px #000;
            transition: left 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #111;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid #eed685;
        }

        .pip-slider-status {
            text-align: center;
            margin-top: 10px;
            font-size: 11px;
            color: #8fcae0;
        }
        .pip-slider-status.active {
            color: #f5e37a;
            font-weight: bold;
        }

        .vivo-tip {
            color: #ffaa00;
            font-size: 10px;
            margin-top: 8px;
            text-align: center;
            padding: 6px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            border: 1px solid #ffaa00;
            display: none;
        }
        .vivo-tip.show { display: block; }

        /* æŠ½å±œå…§æ–°æ¨£å¼ï¼šæ©Ÿå°åç¨±ï¼ä¿ç•™æ™‚é–“ï¼æ”¶è—ï¼æ·å¾‘ */
        .drawer-block {
            background: #1d3342;
            border: 1px solid #2e6078;
            border-radius: 16px;
            padding: 14px 12px;
            margin-bottom: 18px;
        }
        .drawer-block-title {
            color: #f5e37a;
            font-size: 13px;
            font-weight: bold;
            border-bottom: 1px dashed #2e7a9a;
            padding-bottom: 6px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .machine-name-rate {
            display: flex;
            justify-content: space-between;
            background: #10202b;
            border-radius: 30px;
            padding: 10px 14px;
            margin-bottom: 12px;
            border: 1px solid #2e7a9a;
        }
        .machine-name-rate span:first-child {
            color: #b0e0ff;
            font-weight: 600;
            font-size: 15px;
        }
        .machine-name-rate span:last-child {
            color: #f5e37a;
            font-family: 'DSEG7 Classic', monospace;
            font-size: 16px;
        }
        .retain-time {
            background: #102834;
            border-radius: 20px;
            padding: 10px 12px;
            text-align: center;
            color: #c5e2f0;
            font-size: 12px;
            border: 1px solid #2e7a9a;
            margin-bottom: 15px;
        }
        .retain-time .value {
            color: #f5e37a;
            font-size: 22px;
            font-family: 'DSEG7 Classic', monospace;
            display: block;
        }
        .machine-data-row {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            background: #0e1f2c;
            padding: 8px 12px;
            border-radius: 16px;
            margin: 8px 0;
            color: #b8d8e8;
            border: 1px solid #2e5f78;
        }
        .machine-data-row span:last-child {
            color: #f5e37a;
            font-family: 'DSEG7 Classic', monospace;
        }
        .strategy-preview {
            background: #0c1c28;
            padding: 10px 12px;
            border-radius: 16px;
            font-size: 12px;
            color: #b8d8e8;
            border: 1px dashed #3e809c;
            margin: 10px 0;
        }
        .fav-star {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #1a3342;
            border-radius: 30px;
            padding: 10px 14px;
            margin: 15px 0 10px;
            border: 1px solid #d4af37;
        }
        .fav-star .star {
            color: gold;
            font-size: 18px;
        }
        .quick-jump-section p {
            color: #8fcae0;
            font-size: 11px;
            margin: 14px 0 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .jump-badge-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .jump-badge {
            background: #244a5a;
            border: 1px solid #4f93b0;
            border-radius: 30px;
            padding: 6px 14px;
            font-size: 12px;
            font-weight: bold;
            color: #dcf0f5;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            box-shadow: 0 2px 0 #0a1f2a;
            cursor: pointer;
            transition: 0.1s;
        }
        .jump-badge:active {
            transform: translateY(2px);
            box-shadow: none;
        }
        .jump-badge.fav { background: #5f4a2c; border-color: #e5c87b; color: #ffefc0; }
        .jump-badge.reserved { background: #6f4f3a; border-color: #d59b6b; }

        .drawer-item-old {
            background: #1d3342;
            border: 1px solid #2e6078;
            border-radius: 12px;
            padding: 10px 8px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .drawer-item-value {
            margin-left: auto;
            background: #003d55;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-family: 'DSEG7 Classic', monospace;
            color: #f5e37a;
        }

        /* é®ç½©å±¤ (é»æ“Šå¤–éƒ¨é—œé–‰æŠ½å±œ) */
        .drawer-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .drawer-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
    </style>
</head>
<body>
    <!-- ç‹€æ…‹è¨Šæ¯ -->
    <div class="status-message" id="statusMessage"></div>

    <!-- æŠ½å±œé®ç½© (ç¨ç«‹æ§åˆ¶) -->
    <div class="drawer-overlay" id="drawerOverlay"></div>

    <!-- ä¸»æ©Ÿå° (å…§å®¹å®Œå…¨ä¸å‹•, ä½†åŸæœ¬dataAreaå…§çš„æŠ½å±œtriggerèˆ‡æŠ½å±œå°‡ç§»å‡º) -->
    <div id="playMainArea">
        <!-- å¤§è³ç‡ˆå€ (å®Œå…¨ç§»é™¤åŸæœ¬çš„æŠ½å±œç›¸é—œå…ƒç´ ) -->
        <div id="dataArea">
            <div class="prize-light-container-special" id="prizeLightContainer">
                <div class="prizeLightPages" id="prizeLightPages">
                    <div class="prizeLightPage" data-page="0">
                        <div class="pageHeader"><div class="dataTabs"><div class="dataTab active" data-type="spins">è½‰æ•¸</div><div class="dataTab" data-type="bb">BB</div><div class="dataTab" data-type="rb">RB</div></div></div>
                        <div class="pageContent">
                            <div class="blockChartWrapper"><div class="blockChartBars" id="blockChartBars"></div></div>
                            <div class="dataPanel">
                                <div class="dataCard dataCard-total"><div class="dataCardHeader">ç¸½è½‰æ•¸</div><div class="dataCardValue" id="totalSpinsValue">12,589</div></div>
                                <div class="dataCard dataCard-bb"><div class="dataCardHeader">BBæ¬¡æ•¸</div><div class="dataCardValue" id="bbCountValue">156</div></div>
                                <div class="dataCard dataCard-rb"><div class="dataCardHeader">RBæ¬¡æ•¸</div><div class="dataCardValue" id="rbCountValue">289</div></div>
                            </div>
                        </div>
                    </div>
                    <div class="prizeLightPage" data-page="1"><div class="pageHeader"><div class="dataTabs"><div class="dataTab active">æ©Ÿå°å±¥æ­·</div></div></div><div class="history-strategy-content" style="overflow-y:auto; padding:4px;"><div class="history-strategy-list" id="machineHistoryList"></div></div></div>
                    <div class="prizeLightPage" data-page="2"><div class="pageHeader"><div class="dataTabs"><div class="dataTab active">æ©Ÿå°æ”»ç•¥</div></div></div><div class="history-strategy-content" style="overflow-y:auto; padding:4px;"><div class="history-strategy-list" id="machineStrategyList"></div></div></div>
                </div>
                <div class="prize-light-touch-zone" id="prizeLightTouchZone"><div class="touch-indicator"></div></div>
                <div class="prize-light-navigation" id="prizeLightNavigation">
                    <button class="cyber-arrow" id="prevPrizeLightPage">â—€</button>
                    <div class="cyber-dots" id="prizeLightDots"><div class="cyber-dot active" data-index="0"></div><div class="cyber-dot" data-index="1"></div><div class="cyber-dot" data-index="2"></div></div>
                    <button class="cyber-arrow" id="nextPrizeLightPage">â–¶</button>
                </div>
                <!-- åŸæœ¬æŠ½å±œtrigger area è¢«ç§»é™¤äº†ï¼ -->
            </div>
        </div>

        <!-- å–®ä¸€è¦–è¨Šè½‰è»¸å€ -->
        <div id="content">
            <div class="reel-container">
                <div class="single-reel">
                    <video data-v-396f44c9="" id="remotePlayer" width="100%" height="100%" playsinline="" webkit-playsinline="" class="absolute inset-0 w-full h-full object-contain bg-transparent" style="padding-right: 0px;" autoplay loop muted></video>
                    <div class="video-placeholder">ğŸ° è½‰è»¸è¦–è¨Š Â· è‡ªå‹•PiP</div>
                </div>
            </div>
        </div>

        <!-- é ‚éƒ¨é¢æ¿ -->
        <div id="panelTop" class="control-panel">
            <div style="display: flex; align-items: center; height:100%; padding:0 4px;">
                <div style="width:18%;"><button id="maxBet" class="game-btn btn-red" style="width:100%; height:34px;">MAX</button></div>
                <div style="width:60%; display: flex; justify-content: space-around;">
                    <dl><dt>BB Point</dt><dd id="bbPoint">8,984,002pt</dd></dl>
                    <dl><dt>Medal</dt><dd id="medalNum">20Coin</dd></dl>
                </div>
                <div style="width:18%;"><button id="purchaseMedal" class="game-btn btn-red" style="width:100%; height:34px;">BUY</button></div>
            </div>
        </div>

        <!-- åº•éƒ¨é¢æ¿ -->
        <div id="panelBottom" class="control-panel">
            <div style="display:flex; align-items:center; justify-content:flex-start; height:100%; padding:0 6px;">
                <div style="display:flex; justify-content:center; position:relative; left:25px;"><button class="joystick" id="lever"></button></div>
                <div style="display:flex; justify-content:center; gap:32px; margin-left:70px;">
                    <button class="stop-btn" id="btnStopL">â¹</button>
                    <button class="stop-btn" id="btnStopC">â¹</button>
                    <button class="stop-btn" id="btnStopR">â¹</button>
                </div>
            </div>
        </div>

        <!-- å‘½ä»¤å€ -->
        <div id="commandArea" class="control-panel">
            <div style="display:flex; height:100%; gap:5px; padding:0 4px;">
                <button id="btnHome" class="game-btn btn-gray" style="flex:1;">é¦–é </button>
                <button id="btnReserve" class="game-btn btn-amber" style="flex:1;">ä¿ç•™</button>
                <button id="btnBreak" class="game-btn btn-green" style="flex:1;">é›¢é–‹</button>
                <button id="btnAuto" class="game-btn btn-purple" style="flex:1;">è‡ªå‹•</button>
            </div>
        </div>
    </div>

    <!-- ========= ç¨ç«‹æŠ½å±œ trigger (å›ºå®šæ–¼ç•«é¢å³å´) ========= -->
    <div class="drawer-trigger-area" id="drawerTriggerArea">
        <div class="drawer-arrow" id="drawerArrow">â—€</div>
    </div>

    <!-- ========= ç¨ç«‹æŠ½å±œæœ¬é«” (å…§å®¹å®Œå…¨å¾åŸæŠ½å±œç§»æ¤ä¸¦å¼·åŒ–) ========= -->
    <div class="slide-drawer" id="slideDrawer">
        <div class="drawer-header">
            <span>âš™ï¸ å®Œæ•´å·¥å…·æŠ½å±œ</span>
            <button id="drawerCloseBtn" style="background:transparent; border:none; color:#8fcae0; font-size:18px;">âœ•</button>
        </div>
        <div class="drawer-content">
            <!-- 1. æ©Ÿå°åå­—ï¼‹æ¯”ç‡ -->
            <div class="drawer-block">
                <div class="drawer-block-title">ğŸ° æ©Ÿå°åç¨± Â· æ¯”ç‡</div>
                <div class="machine-name-rate">
                    <span>PACHINKO-Î©</span>
                    <span>98.6%</span>
                </div>
            </div>

            <!-- 2. å¯ä¿ç•™æ™‚é–“ -->
            <div class="drawer-block">
                <div class="drawer-block-title">â³ å¯ä¿ç•™æ™‚é–“</div>
                <div class="retain-time">
                    <span class="value">14:32</span>
                    <span>ï¼ˆå‰©é¤˜ä¿ç•™é¡åº¦ï¼‰</span>
                </div>
            </div>

            <!-- 3. æ©Ÿå°è³‡æ–™ -->
            <div class="drawer-block">
                <div class="drawer-block-title">ğŸ“Š æ©Ÿå°è³‡æ–™</div>
                <div class="machine-data-row"><span>ç¸½æŠ•æ³¨</span><span>1,258,000</span></div>
                <div class="machine-data-row"><span>æœ€å¤§BB</span><span>2,400</span></div>
                <div class="machine-data-row"><span>æœ€çµ‚éŠç©</span><span>10åˆ†é˜å‰</span></div>
            </div>

            <!-- 4. æ©Ÿå°æ”»ç•¥ (æŠ½å±œå…§å¿«é€Ÿç‰ˆ) -->
            <div class="drawer-block">
                <div class="drawer-block-title">ğŸ“˜ æ©Ÿå°æ”»ç•¥</div>
                <div class="strategy-preview">
                    â€¢ æ™šä¸Š9é»å¾ŒRBæ©Ÿç‡+12%<br>
                    â€¢ æ¯åƒè½‰å¯æœŸå¾…ä¸€æ¬¡å¤§ç<br>
                    â€¢ ä¿ç•™å†å…¥å ´æœ‰é€£ä¹˜æ•ˆæœ
                </div>
            </div>

            <!-- 5. æ”¶è—æ©Ÿå° ï¼‹ ä¸‹æ–¹æ·å¾‘ -->
            <div class="drawer-block">
                <div class="drawer-block-title">â­ æ”¶è—æ©Ÿå°</div>
                <div class="fav-star">
                    <span class="star">â˜…</span><span>Î© åŒ—æ–—ç¥æ‹³</span><span style="margin-left:auto;">98.2%</span>
                </div>
                <!-- å¿«é€Ÿé€²å…¥æ·å¾‘ éŠæˆ²ä¸­/ä¿ç•™ä¸­/æˆ‘çš„æœ€æ„› -->
                <div class="quick-jump-section">
                    <p>ğŸ® éŠæˆ²ä¸­ Â· å¿«é€Ÿé€²å…¥</p>
                    <div class="jump-badge-container">
                        <div class="jump-badge" data-machine="å°1">âš¡å°1</div>
                        <div class="jump-badge" data-machine="å°3">âš¡å°3</div>
                        <div class="jump-badge" data-machine="å°5">âš¡å°5</div>
                    </div>

                    <p style="margin-top:12px;">ğŸ’¤ ä¿ç•™ä¸­ Â· å¿«é€Ÿé€²å…¥</p>
                    <div class="jump-badge-container">
                        <div class="jump-badge reserved" data-machine="ä¿ç•™A">â°å°2</div>
                        <div class="jump-badge reserved" data-machine="ä¿ç•™C">â°å°7</div>
                    </div>

                    <p style="margin-top:12px;">â¤ï¸ æˆ‘çš„æœ€æ„› Â· å¿«é€Ÿé€²å…¥</p>
                    <div class="jump-badge-container">
                        <div class="jump-badge fav" data-machine="æœ€æ„›1">â­å°4</div>
                        <div class="jump-badge fav" data-machine="æœ€æ„›2">â­å°8</div>
                        <div class="jump-badge fav" data-machine="æœ€æ„›3">â­å°9</div>
                    </div>
                </div>
            </div>

            <!-- ä¿ç•™åŸå§‹çš„PiPæ»‘è»Œé–‹é—œä»¥åŠä¸€äº›èˆŠå…ƒä»¶ -->
            <div class="pip-section">
                <div class="pip-title">ğŸ“º å­æ¯è¦–è¨Šç•«é¢</div>
                <div class="pip-slider-container">
                    <span class="pip-slider-label">é—œ</span>
                    <div class="pip-slider-track" id="pipSliderTrack"><div class="pip-slider-thumb" id="pipSliderThumb">â—‰</div></div>
                    <span class="pip-slider-label">é–‹</span>
                </div>
                <div class="pip-slider-status" id="pipStatus">å­æ¯ç•«é¢é—œé–‰</div>
                <div class="vivo-tip" id="vivoTip">ğŸ“± VIVOæ‰‹æ©Ÿè«‹ä¾æŒ‡ç¤ºæ“ä½œï¼š<br>1. é»å½±ç‰‡å³ä¸‹è§’ã€Œå…¨è¢å¹•ã€<br>2. æŒ‰æ‰‹æ©Ÿã€ŒHomeéµã€è¿”å›æ¡Œé¢</div>
            </div>

            <!-- ä¿ç•™åŸå§‹æŠ½å±œå…ƒä»¶ï¼ˆæ©Ÿå°ç·¨è™Ÿã€åº«å­˜ä»£å¹£ï¼‰ -->
            <div class="drawer-item-old">
                <div class="drawer-item-icon">ğŸ°</div><div class="drawer-item-text">æ©Ÿå°ç·¨è™Ÿ</div><div class="drawer-item-value">#01</div>
            </div>
            <div class="drawer-item-old">
                <div class="drawer-item-icon">ğŸ’</div><div class="drawer-item-text">åº«å­˜ä»£å¹£</div><div class="drawer-item-value" id="drawerMedal">20</div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            const statusMsg = document.getElementById('statusMessage');
            const vivoTip = document.getElementById('vivoTip');
            
            function showMessage(msg, type = 'info') {
                statusMsg.innerText = msg;
                statusMsg.style.borderColor = type === 'error' ? '#c6574a' : (type === 'success' ? '#3fa38c' : '#3487a7');
                statusMsg.classList.add('show');
                setTimeout(() => statusMsg.classList.remove('show'), 2500);
            }

            function isVivoPhone() {
                const ua = navigator.userAgent.toLowerCase();
                return ua.includes('vivo') || ua.includes('bbk') || ua.includes('funtouch') || ua.includes('iqoo') || ua.includes('1831');
            }
            if (isVivoPhone()) vivoTip.classList.add('show');

            // è¦–è¨Š
            const mainVideo = document.getElementById('remotePlayer');
            function createMockVideo() {
                const canvas = document.createElement('canvas'); canvas.width = 360; canvas.height = 640; const ctx = canvas.getContext('2d'); let frame = 0; const stream = canvas.captureStream(30); 
                setInterval(() => { ctx.fillStyle = '#1b2633'; ctx.fillRect(0,0,canvas.width,canvas.height); const symbols = ['7','ğŸ’','â­','ğŸ‹','ğŸ””','7','ğŸ’']; const symbol = symbols[Math.floor(frame/10)%symbols.length]; ctx.font = 'bold 200px Arial'; ctx.fillStyle = '#c0e2f0'; ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.fillText(symbol, canvas.width/2, canvas.height/2); ctx.strokeStyle='#3d5c70'; ctx.lineWidth=8; ctx.strokeRect(4,4,canvas.width-8,canvas.height-8); ctx.font='bold 40px Arial'; ctx.fillStyle='#2a4050'; ctx.globalAlpha=0.3; ctx.fillText('AUTO PIP',canvas.width/2,canvas.height-80); ctx.globalAlpha=1; frame++; },100); return stream;
            }
            const stream = createMockVideo(); mainVideo.srcObject = stream;

            // éŠæˆ²ç‹€æ…‹
            let currentMachine = { totalSpins: 12589, bbCount: 156, rbCount: 289, medalCount: 20, bbPoint: 8984002 };
            function updateDisplay() {
                document.getElementById('totalSpinsValue').innerText = currentMachine.totalSpins.toLocaleString();
                document.getElementById('bbCountValue').innerText = currentMachine.bbCount;
                document.getElementById('rbCountValue').innerText = currentMachine.rbCount;
                document.getElementById('medalNum').innerText = currentMachine.medalCount + 'Coin';
                document.getElementById('bbPoint').innerText = currentMachine.bbPoint.toLocaleString() + 'pt';
                document.getElementById('drawerMedal').innerText = currentMachine.medalCount;
            }
            updateDisplay();

            let rolling = false, autoMode = false, autoInterval = null;
            function spinOnce() {
                if (currentMachine.medalCount <= 0) { showMessage('ä»£å¹£ä¸è¶³','error'); if(autoMode) stopAutoMode(); return false; }
                currentMachine.medalCount--; currentMachine.totalSpins++; updateDisplay();
                mainVideo.play().catch(e=>{}); rolling = true; showMessage('æ»¾è¼ªè½‰å‹•ä¸­'); return true;
            }
            function stopAutoMode() { autoMode = false; document.getElementById('btnAuto').classList.remove('btn-green'); document.getElementById('btnAuto').innerText = 'è‡ªå‹•'; if(autoInterval) { clearInterval(autoInterval); autoInterval = null; } }
            document.getElementById('lever').addEventListener('click', ()=>{ if(autoMode) { showMessage('è«‹å…ˆé—œé–‰è‡ªå‹•æ¨¡å¼','error'); return; } spinOnce(); });
            ['btnStopL','btnStopC','btnStopR'].forEach((id,i)=> document.getElementById(id).addEventListener('click', ()=>{ if(!rolling || autoMode) return; rolling=false; showMessage(`ç¬¬${i+1}è¼ªåœæ­¢ (å–®ä¸€è¦–è¨Šæ¨¡å¼)`); }));

            // PiP æ»‘è»Œ
            const sliderTrack = document.getElementById('pipSliderTrack');
            const sliderThumb = document.getElementById('pipSliderThumb');
            const pipStatus = document.getElementById('pipStatus');
            let pipEnabled = false;
            function updateSliderPosition() {
                if (pipEnabled) { sliderThumb.style.left = 'calc(100% - 34px)'; pipStatus.innerHTML = 'å­æ¯ç•«é¢å•Ÿç”¨ä¸­'; pipStatus.classList.add('active'); document.body.classList.add('pip-active'); } 
                else { sliderThumb.style.left = '-2px'; pipStatus.innerHTML = 'å­æ¯ç•«é¢é—œé–‰'; pipStatus.classList.remove('active'); document.body.classList.remove('pip-active'); }
            }
            async function enterPiPVivo() {
                try { showMessage('VIVOæ‰‹æ©Ÿï¼šè«‹å…¨è¢å¹•å¾ŒæŒ‰Homeéµ', 'info');
                    if (mainVideo.requestFullscreen) await mainVideo.requestFullscreen(); else if (mainVideo.webkitRequestFullscreen) await mainVideo.webkitRequestFullscreen();
                    function onFullscreenChange() { if (!document.fullscreenElement && !document.webkitFullscreenElement) { setTimeout(() => { pipEnabled = true; updateSliderPosition(); showMessage('å­æ¯ç•«é¢å·²é€éç³»çµ±å•Ÿå‹•', 'success'); }, 500); document.removeEventListener('fullscreenchange', onFullscreenChange); document.removeEventListener('webkitfullscreenchange', onFullscreenChange); } }
                    document.addEventListener('fullscreenchange', onFullscreenChange); document.addEventListener('webkitfullscreenchange', onFullscreenChange);
                    setTimeout(() => { if (document.fullscreenElement || document.webkitFullscreenElement) showMessage('è«‹æŒ‰æ‰‹æ©ŸHomeéµè¿”å›æ¡Œé¢', 'info'); }, 3000);
                } catch (err) { showMessage('è«‹æ‰‹å‹•æ“ä½œï¼šå…¨è¢å¹•å½±ç‰‡å¾ŒæŒ‰Homeéµ', 'error'); }
            }
            async function enterPiPStandard() {
                try { if (mainVideo.webkitSupportsPresentationMode && mainVideo.webkitSupportsPresentationMode('picture-in-picture')) { await mainVideo.webkitSetPresentationMode('picture-in-picture'); pipEnabled = true; updateSliderPosition(); showMessage('å­æ¯ç•«é¢å·²å•Ÿå‹•','success'); return true; } return false; } catch (err) { return false; }
            }
            async function enterPiP() { if (isVivoPhone()) { await enterPiPVivo(); } else { const success = await enterPiPStandard(); if (!success) showMessage('æ‚¨çš„è£ç½®ä¸æ”¯æ´è‡ªå‹•PiP','error'); } }
            function exitPiP() { if (mainVideo.webkitPresentationMode === 'picture-in-picture') mainVideo.webkitSetPresentationMode('inline'); pipEnabled = false; updateSliderPosition(); showMessage('å·²é€€å‡ºå­æ¯ç•«é¢'); }
            mainVideo.addEventListener('webkitpresentationmodechanged', ()=> { const active = (mainVideo.webkitPresentationMode === 'picture-in-picture'); if (active !== pipEnabled) { pipEnabled = active; updateSliderPosition(); } });
            sliderTrack.addEventListener('click', (e) => { const rect = sliderTrack.getBoundingClientRect(); const clickX = e.clientX - rect.left; const midPoint = rect.width/2; if (clickX > midPoint) { if (!pipEnabled) enterPiP(); } else { if (pipEnabled) exitPiP(); } });

            document.getElementById('btnAuto').addEventListener('click', ()=>{ if (autoMode) { stopAutoMode(); showMessage('è‡ªå‹•æ¨¡å¼é—œé–‰'); } else { autoMode = true; document.getElementById('btnAuto').classList.add('btn-green'); document.getElementById('btnAuto').innerText = 'è‡ªå‹•ä¸­'; showMessage('è‡ªå‹•æ¨¡å¼å•Ÿå‹•','success'); if (!pipEnabled) setTimeout(()=>enterPiP(),500); if (!rolling) spinOnce(); if (autoInterval) clearInterval(autoInterval); autoInterval = setInterval(()=>{ if (!autoMode) return; spinOnce(); },3000); } });

            document.getElementById('purchaseMedal').addEventListener('click', ()=>{ if (currentMachine.bbPoint >= 50) { currentMachine.bbPoint -= 50; currentMachine.medalCount += 50; updateDisplay(); showMessage('è³¼è²·50ä»£å¹£','success'); } else showMessage('BBé»ä¸è¶³','error'); });

            // å¤§è³ç‡ˆå°èˆª
            const pages = document.getElementById('prizeLightPages'); const dots = document.querySelectorAll('.cyber-dot'); const prev = document.getElementById('prevPrizeLightPage'); const next = document.getElementById('nextPrizeLightPage'); let curPage = 0;
            function setPage(p) { if(p<0||p>2) return; curPage = p; pages.style.transform = `translateX(-${p*33.333}%)`; dots.forEach((d,i)=> d.classList.toggle('active', i===p)); showNav(); }
            prev.addEventListener('click', ()=> setPage(curPage-1)); next.addEventListener('click', ()=> setPage(curPage+1)); dots.forEach(d=> d.addEventListener('click', function(){ setPage(parseInt(this.dataset.index)); }));
            const nav = document.getElementById('prizeLightNavigation'); const zone = document.getElementById('prizeLightTouchZone'); let hideTimer;
            function showNav() { nav.classList.add('active'); clearTimeout(hideTimer); hideTimer = setTimeout(()=> nav.classList.remove('active'), 4000); }
            zone.addEventListener('touchstart', showNav);

            // å…¶ä»–æŒ‰éˆ•
            document.getElementById('btnReserve').addEventListener('click', ()=> showMessage('ä¿ç•™åŠŸèƒ½'));
            document.getElementById('maxBet').addEventListener('click', ()=> showMessage('MAX BET'));
            document.getElementById('btnHome').addEventListener('click', ()=> showMessage('é¦–é '));
            document.getElementById('btnBreak').addEventListener('click', ()=> { showMessage('é›¢é–‹'); stopAutoMode(); });

            // å±¥æ­·èˆ‡æ”»ç•¥
            document.getElementById('machineHistoryList').innerHTML = '<div style="color:#c0ddec;">Â· 02/15 æœ€å¤§ç8500</div><div style="color:#c0ddec;">Â· 02/12 BBé€£ç™¼2æ¬¡</div>';
            document.getElementById('machineStrategyList').innerHTML = '<div style="color:#c0ddec;">ğŸ“Œ 20:00å¾ŒRBæ©Ÿç‡è¼ƒé«˜</div><div style="color:#c0ddec;">ğŸ“Œ é€£10æ²’ä¸­å¯ç•¥å¢æ³¨</div>';

            // ===== ç¨ç«‹æŠ½å±œæ§åˆ¶ (trigger, drawer, overlay, close) =====
            const triggerArea = document.getElementById('drawerTriggerArea');
            const drawer = document.getElementById('slideDrawer');
            const closeBtn = document.getElementById('drawerCloseBtn');
            const overlay = document.getElementById('drawerOverlay');

            function openDrawer() {
                drawer.classList.add('open');
                overlay.classList.add('active');
            }
            function closeDrawer() {
                drawer.classList.remove('open');
                overlay.classList.remove('active');
            }

            triggerArea.addEventListener('click', (e) => {
                e.stopPropagation();
                openDrawer();
            });

            closeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                closeDrawer();
            });

            overlay.addEventListener('click', closeDrawer);

            // é»æ“Šå¿«é€Ÿæ·å¾‘ badge å¯åˆ‡æ›æ©Ÿå° (æ¨¡æ“¬)
            document.querySelectorAll('.jump-badge').forEach(badge => {
                badge.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const machine = badge.innerText.replace(/[âš¡â°â­]/g,'').trim() || 'æœªçŸ¥æ©Ÿå°';
                    showMessage(`å¿«é€Ÿåˆ‡æ›è‡³ ${machine}`, 'success');
                    closeDrawer(); // åˆ‡æ›å¾Œé—œé–‰æŠ½å±œ
                });
            });

            document.addEventListener('touchstart', () => { if (mainVideo.paused) mainVideo.play().catch(e=>{}); }, { once: true });
        })();
    </script>
</body>
</html>
